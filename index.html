<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Westinghouse Pittsburg Neon Sign - randomize usr</title>
    <style>
        html, body { overflow: hidden; width: 100%; height: 100%; margin: 0; padding: 0; }
        #renderCanvas { width: 100%; height: 100%; touch-action: none; }
    </style>
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
    <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
</head>
<body>
    <canvas id="renderCanvas"></canvas>
    <script>
        const canvas = document.getElementById("renderCanvas");
        const engine = new BABYLON.Engine(canvas, true);

        var lightShow = [
            // ONE OFF - PING-PONG SEQUENCE
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "A09", "A10", "B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "B09", "B10", "C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10", "D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"]}, 
            {keyframe: ["B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "B09", "B10", "C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10", "D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"]}, 
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "A09", "A10", "C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10", "D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"]}, 
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "A09", "A10", "B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "B09", "B10", "D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"]}, 
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "A09", "A10", "B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "B09", "B10", "C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"]}, 
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "A09", "A10", "B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "B09", "B10", "C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10", "D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"]}, 
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "A09", "A10", "B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "B09", "B10", "C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10", "D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"]}, 
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "A09", "A10", "B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "B09", "B10", "C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10", "D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"]}, 
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "A09", "A10", "B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "B09", "B10", "C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10", "D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"]}, 
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "A09", "A10", "B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "B09", "B10", "C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10", "D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10"]}, 
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "A09", "A10", "B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "B09", "B10", "C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10", "D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"]}, 
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "A09", "A10", "B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "B09", "B10", "C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10", "D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"]}, 
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "A09", "A10", "B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "B09", "B10", "C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10", "D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"]}, 
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "A09", "A10", "B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "B09", "B10", "C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10", "D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"]}, 
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "A09", "A10", "B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "B09", "B10", "C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"]}, 
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "A09", "A10", "B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "B09", "B10", "D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"]}, 
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "A09", "A10", "C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10", "D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"]}, 
            {keyframe: ["B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "B09", "B10", "C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10", "D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"]}, 
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "A09", "A10", "B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "B09", "B10", "C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10", "D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"],duration:2000}, 
            // EACH ON - PING-PONG SEQUENCE
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "A09", "A10"]}, 
            {keyframe: ["B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "B09", "B10"]}, 
            {keyframe: ["C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10"]}, 
            {keyframe: ["D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10"]}, 
            {keyframe: ["E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10"]}, 
            {keyframe: ["F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10"]}, 
            {keyframe: ["G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10"]}, 
            {keyframe: ["H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10"]}, 
            {keyframe: ["I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"]}, 
            {keyframe: ["H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10"]}, 
            {keyframe: ["G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10"]}, 
            {keyframe: ["F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10"]}, 
            {keyframe: ["E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10"]}, 
            {keyframe: ["D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10"]}, 
            {keyframe: ["C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10"]}, 
            {keyframe: ["B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "B09", "B10"]}, 
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "A09", "A10"]},
            // LIGHT TRIPLETS CROSSING
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "G09", "G10", "H09", "H10", "I09", "I10"]}, 
            {keyframe: ["D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10"]}, 
            {keyframe: ["A09", "A10", "B09", "B10", "C09", "C10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08"]}, 
            {keyframe: ["D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10"]}, 
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "G09", "G10", "H09", "H10", "I09", "I10"]}, 
            {keyframe: ["D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10"]}, 
            {keyframe: ["A09", "A10", "B09", "B10", "C09", "C10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08"]}, 
            {keyframe: ["D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10"]}, 
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "A09", "A10", "B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "B09", "B10", "C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10", "D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"],duration:2000}, 
            // LIGHT TRIPLETS ON
            {keyframe: ["A02", "B02", "C02"]}, 
            {keyframe: ["C02", "D02", "E02"]}, 
            {keyframe: ["E02", "F02", "G02"]}, 
            {keyframe: ["G02", "H02", "I02"]}, 
            {keyframe: ["G02", "H08", "I02", "G08", "H02", "I08"]}, 
            {keyframe: ["E02", "E08", "F02", "F08", "G02", "G08"]}, 
            {keyframe: ["C02", "C08", "D02", "D08", "E02", "E08"]}, 
            {keyframe: ["A02", "A08", "B02", "B08", "C02", "C08"]}, 
            {keyframe: ["A01", "A02", "A03", "A08", "B01", "B02", "B03", "B08", "C01", "C02", "C03", "C08"]}, 
            {keyframe: ["C01", "C02", "C03", "C08", "D01", "D02", "D03", "D08", "E01", "E02", "E03", "E08"]}, 
            {keyframe: ["E01", "E02", "E03", "E08", "F01", "F02", "F03", "F08", "G01", "G02", "G03", "G08"]}, 
            {keyframe: ["G01", "G02", "G03", "G08", "H01", "H02", "H03", "H08", "I01", "I02", "I03", "I08"]}, 
            {keyframe: ["G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08"]}, 
            {keyframe: ["E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08"]}, 
            {keyframe: ["C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08"]}, 
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08"]}, 
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "A09", "A10", "B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "B09", "B10", "C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10"]}, 
            {keyframe: ["C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10", "D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10"]}, 
            {keyframe: ["E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10"]}, 
            {keyframe: ["G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"]}, 
            {keyframe: ["E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"]}, 
            {keyframe: ["C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10", "D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"]}, 
            {keyframe: ["A01", "A02", "A03", "A04", "A05", "A06", "A07", "A08", "A09", "A10", "B01", "B02", "B03", "B04", "B05", "B06", "B07", "B08", "B09", "B10", "C01", "C02", "C03", "C04", "C05", "C06", "C07", "C08", "C09", "C10", "D01", "D02", "D03", "D04", "D05", "D06", "D07", "D08", "D09", "D10", "E01", "E02", "E03", "E04", "E05", "E06", "E07", "E08", "E09", "E10", "F01", "F02", "F03", "F04", "F05", "F06", "F07", "F08", "F09", "F10", "G01", "G02", "G03", "G04", "G05", "G06", "G07", "G08", "G09", "G10", "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", "H09", "H10", "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"],duration:2000}, 
            // EACH LIGHT ONE ELEMENT MORE THAN PREVIOUS, STATIC
            {keyframe: [
            "A01"]}, 
            {keyframe: [
            "A01", 
            "B01", "B02"]}, 
            {keyframe: [
            "A01", 
            "B01", "B02", 
            "C01", "C02", "C03"]}, 
            {keyframe: [
            "A01", 
            "B01", "B02", 
            "C01", "C02", "C03", 
            "D01", "D02", "D03", "D04"]}, 
            {keyframe: [
            "A01", 
            "B01", "B02", 
            "C01", "C02", "C03", 
            "D01", "D02", "D03", "D04", 
            "E01", "E02", "E03", "E04", "E05"]}, 
            {keyframe: [
            "A01", 
            "B01", "B02", 
            "C01", "C02", "C03", 
            "D01", "D02", "D03", "D04", 
            "E01", "E02", "E03", "E04", "E05", 
            "F01", "F02", "F03", "F04", "F05", "F06"]}, 
            {keyframe: [
            "A01", 
            "B01", "B02", 
            "C01", "C02", "C03", 
            "D01", "D02", "D03", "D04", 
            "E01", "E02", "E03", "E04", "E05", 
            "F01", "F02", "F03", "F04", "F05", "F06", 
            "G01", "G02", "G03", "G04", "G05", "G06", "G07"]}, 
            {keyframe: [
            "A01", 
            "B01", "B02", 
            "C01", "C02", "C03", 
            "D01", "D02", "D03", "D04", 
            "E01", "E02", "E03", "E04", "E05", 
            "F01", "F02", "F03", "F04", "F05", "F06", 
            "G01", "G02", "G03", "G04", "G05", "G06", "G07", 
            "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08"]}, 
            {keyframe: [
            "A01", 
            "B01", "B02", 
            "C01", "C02", "C03", 
            "D01", "D02", "D03", "D04", 
            "E01", "E02", "E03", "E04", "E05", 
            "F01", "F02", "F03", "F04", "F05", "F06", 
            "G01", "G02", "G03", "G04", "G05", "G06", "G07", 
            "H01", "H02", "H03", "H04", "H05", "H06", "H07", "H08", 
            "I01", "I02", "I03", "I04", "I05", "I06", "I07", "I08", "I09", "I10"],duration:2000},
        ];

        const createScene = function () {
            const scene = new BABYLON.Scene(engine);
            scene.clearColor = new BABYLON.Color3(0, 0, 0); 

            const camera = new BABYLON.ArcRotateCamera("camera", -Math.PI / 2, Math.PI / 2, 100, new BABYLON.Vector3(0, 0, 0), scene); // set the camera
            camera.lowerBetaLimit = 1; // vertical
            camera.upperBetaLimit = Math.PI / 1.5; 
            camera.lowerAlphaLimit = -Math.PI / 1.1; // horizonal
            camera.upperAlphaLimit = (Math.PI / 2) - 1.9;
            camera.lowerRadiusLimit = 10; // zoom
            camera.upperRadiusLimit = 150;
            camera.attachControl(canvas, true);

            const gl = new BABYLON.GlowLayer("glow", scene); // setup glow layer
            gl.intensity = 2;

            const matOn = new BABYLON.StandardMaterial("matOn", scene); // setup off materia
            matOn.diffuseColor = new BABYLON.Color3(0, 0, 0);
            matOn.emissiveColor = new BABYLON.Color3(0.3, 0.6, 1);

            const matOff = new BABYLON.StandardMaterial("matOff", scene); // setup on material
            matOff.diffuseColor = new BABYLON.Color3(0, 0, 0);
            matOff.emissiveColor = new BABYLON.Color3(0, 0, 0);

            var meshesMap = {};

            BABYLON.SceneLoader.ImportMesh("", "./", "westinghouse.obj", scene, function (meshes) {
                meshes.forEach(function(mesh) {
                    meshesMap[mesh.name] = mesh;
                    mesh.material = matOff;
                });
            });

            // --- LOGICA DEL REPRODUCTOR ---
            var nonStandardDuration = 0;
            var currentIndex = 0;
            var deltaTime = 0; // deltaTime estÃ¡ en milisegundos

            scene.registerBeforeRender(function () {
                deltaTime += engine.getDeltaTime();

                var currentStep = lightShow[currentIndex]; // actual keyframe

                if (currentStep.duration !== undefined) { // override default blinking duration (1/2s)
                    nonStandardDuration = currentStep.duration;
                } else {
                    nonStandardDuration = 0;
                }

                if (deltaTime > 500 && deltaTime > nonStandardDuration) { // the blinking time is always 1/2s. excepts when it's defined by the keyframe
                    deltaTime = 0; // default blinking time counter
                   
                    currentIndex++; // Next keyframe, rolls
                    if (currentIndex >= lightShow.length) {
                        currentIndex = 0;
                    }

                    var currentKeyframe = lightShow[currentIndex].keyframe; // loads the current keyframe
                    
                    Object.values(meshesMap).forEach(mesh => {mesh.material = matOff}); // Scene objects all off after every keyframe, or previous keyframe will be kept on

                    switch (currentKeyframe[0]) {
                        case "ALL":
                            currentKeyframe.forEach(element => {
                                if(meshesMap[element]) meshesMap[element].material = matOn;
                            });
                            break;
                        default:
                            currentKeyframe.forEach(element => {
                                if (meshesMap[element]) meshesMap[element].material = matOn;
                            });
                    }
                }
            });
            return scene;
        };

        const scene = createScene();
        engine.runRenderLoop(() => scene.render());
        window.addEventListener("resize", () => engine.resize());
    </script>
</body>
</html>
